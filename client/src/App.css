/* App.css - Theme Mahjong Ways (Phiên bản Fix lỗi React Root) */
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@500;900&display=swap');

:root {
  --bg-gradient: linear-gradient(180deg, #5e0d0d 0%, #2b0505 100%);
  --gold-text: #f0c040;
  --gold-border: #f7e2a8;
  --win-red: #d11e1e;
}

/* 1. RESET QUAN TRỌNG */
* { box-sizing: border-box; }

/* 2. CẤU HÌNH KHUNG NGOÀI CÙNG (Body & Root) */
body, html {
  margin: 0; padding: 0;
  width: 100%; height: 100%; /* Bắt buộc full màn hình */
  overflow: hidden; /* Cấm cuộn */
  background-color: #000;
}

/* --- ĐÂY LÀ ĐOẠN QUAN TRỌNG MỚI THÊM --- */
#root {
  width: 100%; height: 100%;
  display: flex; justify-content: center; align-items: center;
}
/* --------------------------------------- */

/* 3. GAME CONTAINER */
.game-container {
  width: 100%; 
  max-width: 450px; /* Độ rộng chuẩn đẹp cho laptop/mobile */
  height: 100%;     /* Chiếm trọn chiều cao của #root */
  display: flex; flex-direction: column;
  background: var(--bg-gradient);
  position: relative;
  box-shadow: 0 0 50px rgba(0,0,0,0.8);
  border-left: 2px solid #5c4118; border-right: 2px solid #5c4118;
}

/* --- CÁC PHẦN CỐ ĐỊNH (HEADER, MULTIPLIER) --- */
.header {
  flex: 0 0 auto; /* Không co giãn */
  height: 60px;   /* Chiều cao cố định px để không bị quá to */
  min-height: 40px; 
  display: flex; align-items: center; justify-content: center;
  background: rgba(0,0,0,0.2); border-bottom: 2px solid #5c4118; padding: 0 10px;
}
.ways-text { 
  color: #d6a664; font-weight: 900; margin: 0; text-shadow: 0 2px 0 #3d1f05; 
  font-size: clamp(16px, 2.5vh, 22px);
}

.multiplier-bar {
  flex: 0 0 auto;
  height: 40px; /* Cố định px */
  display: flex; justify-content: center; gap: 5px;
  background: #2b1105; padding: 4px; margin: 0 10px; 
  border-radius: 0 0 10px 10px; border: 2px solid #5c4118; border-top: none; 
}
.mul-item {
  width: 45px; display: flex; align-items: center; justify-content: center;
  font-weight: bold; color: #8a5a2b; background: #1a0800; border: 1px solid #3d1f05; border-radius: 4px; 
  font-size: 13px;
}
.mul-item.active { background: linear-gradient(to bottom, #ffeebb, #ffcc00); color: #b33700; border-color: #fff; transform: scale(1.1); }

/* --- KHU VỰC GIỮA (LƯỚI) - TỰ ĐỘNG CO GIÃN --- */
.main-content {
  /* Key fix: Chiếm hết chỗ còn lại, nhưng được phép co nhỏ (min-height: 0) */
  flex: 1 1 auto; 
  display: flex; flex-direction: column; 
  position: relative; overflow: hidden;
  padding: 10px 0;
  min-height: 0; 
}

.slot-frame {
  flex: 1; 
  width: 100%; padding: 0 10px;
  display: flex; align-items: center; 
  min-height: 0; 
}

.slot-machine {
  width: 100%; height: 100%;
  display: grid; 
  grid-template-columns: repeat(5, 1fr); 
  grid-template-rows: repeat(4, 1fr); 
  gap: 4px; 
}

/* Banner Thắng */
.win-banner-container {
  flex: 0 0 auto; height: 40px; /* Cố định nhỏ gọn */
  width: 100%; display: flex; justify-content: center; align-items: center;
  margin-top: 5px; z-index: 20;
}
.win-banner {
  background: linear-gradient(180deg, #d11e1e 0%, #8a0000 100%);
  padding: 0 30px; height: 32px; border: 2px solid #ffd700; border-radius: 8px;
  color: #fff; font-weight: 900; 
  font-size: 18px;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.6); animation: pop-in 0.3s;
}

/* --- FOOTER (CỐ ĐỊNH) --- */
.footer {
  flex: 0 0 auto; /* Không co giãn */
  height: 130px;  /* Chiều cao cố định px an toàn cho laptop */
  background: #1e0505; border-top: 2px solid #5c4118;
  display: flex; flex-direction: column; justify-content: flex-end; padding-bottom: 5px;
}

.info-strip {
  height: 30px; display: flex; justify-content: space-between; padding: 0 15px; 
  background: #0f0202; align-items: center; margin-bottom: 5px;
}
.info-box { text-align: center; min-width: 50px; }
.info-label { font-size: 9px; color: #888; } 
.info-value { font-size: 12px; color: #fff; font-weight: bold; }

.control-deck { 
  flex: 1; display: flex; justify-content: space-around; align-items: center; 
}

.btn-circle-small { 
  width: 38px; height: 38px; border-radius: 50%; background: #3d0808; color: gold; border: 2px solid #5c4118; 
  font-size: 18px; font-weight: bold; display: flex; align-items: center; justify-content: center; cursor: pointer;
}

.spin-btn-orb { 
  width: 75px; height: 75px;
  border-radius: 50%; background: linear-gradient(135deg, #00b09b 0%, #00665c 100%); 
  border: 4px solid #004d45; display: flex; justify-content: center; align-items: center; 
  box-shadow: 0 0 15px #00ffaa; cursor: pointer;
}
.spin-btn-orb:active { transform: scale(0.95); }
.spin-icon { width: 40px; height: 40px; border: 4px solid white; border-radius: 50%; border-top-color: transparent; transform: rotate(45deg); }
.btn-func { background: none; border: none; color: #888; font-size: 10px; font-weight: bold; cursor: pointer; display: flex; flex-direction: column; align-items: center; }

/* STYLE CŨ (TILE, ANIMATION...) */
.tile { width: 100%; height: 100%; background: #e8e8e8; border-radius: 6px; position: relative; overflow: hidden; border: 3px solid transparent; display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 0 #bbb, 0 6px 5px rgba(0,0,0,0.5); transition: border-color 0.2s; }
.tile img { width: 100%; height: 100%; object-fit: cover; display: block; }
.tile.is-spinning img { opacity: 0; }
.tile.is-spinning { background: repeating-linear-gradient(0deg, #dcdcdc 0%, #f5f5f5 15%, #bfbfbf 30%, #e0e0e0 50%, #dcdcdc 100%); background-size: 100% 200%; animation: blur-scroll 0.15s infinite linear; border-color: transparent !important; }
@keyframes blur-scroll { 0% { background-position: 0% 0%; } 100% { background-position: 0% 100%; } }
.tile.is-gold { border-color: #ffd700; background: linear-gradient(135deg, #fff7cc 0%, #ffd700 100%); box-shadow: 0 0 15px gold; z-index: 1; }
.tile.is-gold img { filter: sepia(100%) saturate(500%) hue-rotate(5deg) brightness(1.1); }
.tile.is-gold::after { content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(to right, transparent, rgba(255, 223, 0, 0.8), transparent); transform: rotate(45deg); animation: shine 2s infinite; pointer-events: none; }
.tile.is-wild { background: #3a0000; border-color: #ff4500; }
.tile.is-wild img { filter: drop-shadow(0 0 5px orange) brightness(1.2); transform: scale(1.1); }
.tile.is-scatter { border-color: #ff3300; background: radial-gradient(circle, #5e0d0d 0%, #2b0505 100%); z-index: 2; animation: scatter-pulse 1.5s infinite; }
.tile.is-scatter img { filter: brightness(1.2); object-fit: contain; padding: 5px; }
@keyframes scatter-pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
@keyframes shatter { 0% { transform: scale(1); } 100% { transform: scale(0); opacity: 0; } }
.tile.is-winner { animation: shatter 0.5s forwards; z-index: 10; border-color: gold; }
@keyframes drop { 0% { transform: translateY(-300%); } 100% { transform: translateY(0); } }
.tile.is-falling { animation: drop 0.5s cubic-bezier(0.25, 1, 0.5, 1) forwards; }
.freespin-modal { position: absolute; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.9); z-index: 100; display:flex; flex-direction:column; justify-content:center; align-items:center; animation: zoom-in 0.5s; }
@keyframes pop-in { 0% { transform: scale(0); } 80% { transform: scale(1.1); } 100% { transform: scale(1); } }
@keyframes zoom-in { from {transform: scale(0);} to {transform: scale(1);} }
/* --- HIỆU ỨNG KHI TRÚNG SCATTER (WIN ANIMATION) --- */
.tile.is-scatter-win {
  z-index: 100 !important; /* Đè lên tất cả */
  animation: scatter-win-pop 0.5s infinite alternate !important; /* Chớp tắt liên tục */
  border-color: #ffd700 !important; /* Viền vàng rực */
  box-shadow: 0 0 30px #ffd700, 0 0 50px #ff0000 !important; /* Phát sáng lan tỏa */
  filter: brightness(1.3) contrast(1.2);
}

.tile.is-scatter-win img {
  transform: scale(1.2); /* Phóng to ảnh bên trong */
  transition: transform 0.3s;
}

@keyframes scatter-win-pop {
  0% { transform: scale(1); box-shadow: 0 0 20px #ffd700; }
  100% { transform: scale(1.15); box-shadow: 0 0 50px #ff4500, inset 0 0 20px gold; }
}
/* --- TRANG CHỦ (LOBBY SCREEN) --- */
.home-screen {
  width: 100%; height: 100%;
  background: radial-gradient(circle, #5e0d0d 0%, #1a0000 100%); /* Nền đỏ đen sâu thẳm */
  display: flex; flex-direction: column;
  justify-content: center; align-items: center;
  position: absolute; top: 0; left: 0; z-index: 999;
  animation: fade-in 0.5s ease-in;
}

.home-logo {
  font-size: clamp(40px, 8vh, 60px);
  font-weight: 900;
  color: #f0c040;
  text-transform: uppercase;
  text-shadow: 0 5px 0 #8a5a2b, 0 0 20px rgba(255, 215, 0, 0.5);
  margin-bottom: 20px;
  letter-spacing: 2px;
  text-align: center;
  animation: float-logo 3s ease-in-out infinite;
}

.home-subtitle {
  color: #fff;
  font-size: 16px;
  margin-bottom: 50px;
  opacity: 0.8;
  letter-spacing: 1px;
}

.start-btn-large {
  background: linear-gradient(to bottom, #ffeebb, #ffcc00);
  border: 4px solid #b37400;
  border-radius: 50px;
  padding: 15px 60px;
  font-size: 24px;
  font-weight: 900;
  color: #5e0d0d;
  cursor: pointer;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 10px 0 #b37400;
  transition: all 0.1s;
  animation: pulse-btn 1.5s infinite;
}

.start-btn-large:active {
  transform: translateY(5px);
  box-shadow: 0 0 10px rgba(255, 215, 0, 0.6), 0 5px 0 #b37400;
}

/* Hiệu ứng nảy nảy cho Logo */
@keyframes float-logo {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-15px); }
}

/* Hiệu ứng nhấp nháy nút Start */
@keyframes pulse-btn {
  0% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 10px 0 #b37400; }
  50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(255, 215, 0, 0.9), 0 10px 0 #b37400; }
  100% { transform: scale(1); box-shadow: 0 0 20px rgba(255, 215, 0, 0.6), 0 10px 0 #b37400; }
}

@keyframes fade-in { from { opacity: 0; } to { opacity: 1; } }

/* --- TỐI ƯU HÓA CHO ĐIỆN THOẠI (FIX LẠI) --- */
@media screen and (max-width: 768px) {
  
  /* 1. Tắt bóng đổ nặng, giữ lại màu vàng */
  .tile.is-gold {
    box-shadow: 0 0 2px gold !important;
  }

  /* 2. Hiệu ứng thắng Scatter đơn giản hóa */
  .tile.is-scatter-win {
    box-shadow: none !important;
    animation: simple-pop 1s infinite alternate !important; 
  }
  
  @keyframes simple-pop {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }

  /* 3. Giảm bóng các thành phần khác */
  .win-banner, .spin-btn-orb {
    box-shadow: 0 0 5px rgba(0,0,0,0.5) !important;
  }

  /* 4. Tắt nhấp nháy nút Start */
  .start-btn-large {
    animation: none !important;
    box-shadow: 0 5px 0 #b37400 !important;
  }

  /* 5. Ép dùng GPU để mượt hơn */
  .tile, .slot-machine {
    will-change: transform;
    transform: translate3d(0, 0, 0);
  }
}